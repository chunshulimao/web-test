(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1482e204"],{"05b1":function(t,e,n){t.exports=n.p+"static/img/pool.9389a4a1.png"},1547:function(t,e,n){},"4fac3":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home poolContent home70"},[t._m(0),n("div",{staticClass:"pool-title centerText"},[t._v(" "+t._s(t.$t("Stake"))+" "+t._s(t.pool.stake)+" "+t._s(t.$t("Earn"))+" "+t._s(t.pool.earn)+" "+t._s(t.pool.projectName?"("+t.$t(t.pool.projectName)+")":"")+" ")]),n("div",{staticClass:"bigcontent"},[n("div",{staticClass:"poolWithdraw contentleft1"},[n("div",{staticClass:"poolWithdrawContent1"},[n("span",{staticClass:"poolWithdrawContentRow"},[t._v(" "+t._s(t.$t("lockedAmount"))+" ")]),n("span",{staticClass:"poolWithdrawContentRow num"},[t._v(" "+t._s(t._f("transformationNumber")(t.lockNumber))+" "+t._s(t.pool.stake)+" ")]),n("span",{staticClass:"poolWithdrawContentRow"},[t._v(" "+t._s(t.$t("unlockIn"))+" ")]),n("span",{staticClass:"poolWithdrawContentRow num"},[t._v(" "+t._s(t._f("formatDate2")(1e3*t.lockEndTime))+" ")]),n("span",{staticClass:"poolWithdrawContentRow"},[t._v(" "+t._s(t.$t("Vesting"))+" ")]),n("span",{staticClass:"poolWithdrawContentRow num"},[t._v(" "+t._s(t.vesting)+" "+t._s(t.pool.earn)+" ")]),n("span",{staticClass:"poolWithdrawContentRow"},[t._v(" "+t._s(t.$t("Withdrawable"))+" ")]),n("span",{staticClass:"poolWithdrawContentRow num"},[t._v(" "+t._s(t.withdrawable)+" "+t._s(t.pool.earn)+" ")])]),n("div",{staticClass:"poolWithdrawContent2"},[n("div",{staticClass:"poolWithdrawBtnSelected",on:{click:t.withdrawInterest}},[t._v(t._s(t.$t("withdrawEarned"))+" ")]),n("div",{staticClass:"poolWithdrawBtnSelected",on:{click:t.withdrawDeposit}},[t._v(t._s(t.$t("withdrawLokced")))])])]),n("div",{staticClass:"poolAddOrRemove contentRight"},[n("div",{staticClass:"poolAddOrRemoveRow"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.confirmNum,expression:"confirmNum"}],staticClass:"input",attrs:{type:"number",placeholder:t.minDepositAmount?t.$t("min")+t.minDepositAmount:""},domProps:{value:t.confirmNum},on:{input:function(e){e.target.composing||(t.confirmNum=e.target.value)}}}),n("img",{attrs:{src:t.pool.stakeIcon}}),n("div",{staticClass:"coinName"},[n("span",[t._v(t._s(t.pool.stake))])])]),n("div",{staticClass:"poolAddOrRemoveRow"},[n("span",[t._v(t._s(t.$t("Balance"))+": "+t._s(t.balance))]),n("div",{staticClass:"max",on:{click:t.max}},[t._v(t._s(t.$t("Max")))])]),n("div",{staticClass:"poolAddOrRemoveRow"},t._l(t.lockTime,(function(e){return n("div",{class:t.currentLockTime===e?"noselected selected":"noselected",on:{click:function(n){return t.selectLockTime(e)}}},[t._v(" "+t._s(e)+t._s(97===t.chainId?"M":"W")+" ")])})),0),n("div",{staticClass:"poolConfirm centerText",on:{click:function(e){"Approve"==t.poolConfirm?t.approve():t.staking()}}},[t._v(t._s(t.$t(t.poolConfirm))+" ")]),n("div",{staticClass:"flex justify-center p"},[t._v("Deposit fee: 0%, Withdrawal fee: 0%")])]),n("div",{staticClass:"poolStatistics contentleft2"},[n("div",{staticClass:"poolStatisticsRow"},[n("div",{staticClass:"poolStatisticsTitle"},[n("span",[t._v(t._s(t.$t("APR")))])]),n("div",{staticClass:"poolStatisticsContent"},[n("span",[t._v(t._s(t.apr)+" %")])])]),n("div",{staticClass:"poolStatisticsRow"},[n("div",{staticClass:"poolStatisticsTitle"},[n("span",[t._v(t._s(t.$t("Liquidity")))])]),n("div",{staticClass:"poolStatisticsContent"},[n("span",[t._v(t._s(t.liquidity)+" "+t._s(t.pool.stake))])])])]),n("p",[t._v(" "+t._s(t.$t("lockruler",[t.pool.earn]))+" ")])])])},a=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("header",{staticClass:"header"},[r("img",{staticClass:"titleImg",attrs:{src:n("05b1"),alt:""}})])}],o=n("1da1"),s=(n("96cf"),n("d399")),c=n("b775"),i=n("a232"),l=n("84d7"),u=n("901e");u.config({POW_PRECISION:100,EXPONENTIAL_AT:[-20,80]});var p={data:function(){return{lockTime:[1,12,22,32,42,52],currentLockTime:null,lockNumber:0,lockEndTime:0,network:"bsc",contractAddress:null,pool:null,poolContract:null,stakeTokenContract:null,liquidity:0,vesting:0,withdrawable:0,apr:0,balance:0,confirmNum:null,poolConfirm:"Approve",minDepositAmount:null,chainId:null,penalty:null}},created:function(){this.chainId=this.$web3Obj.chainId,97===this.chainId&&(this.lockTime=[10,120,220,320,420,600]),this.currentLockTime=this.lockTime[0],this.network=this.$route.query.network,this.pool=this.$config.project.pools[this.network][this.$route.query.index],this.contractAddress=this.pool.contractAddress,this.getPoolUserData()},methods:{getPoolUserData:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var n,r,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.poolContract=new t.$web3Obj.web3.eth.Contract(t.$config.abi[t.pool.contractType],t.contractAddress),t.getPentyDate(),e.next=4,t.poolContract.methods.getUserInfo(t.$web3Obj.currentAddress).call();case 4:return n=e.sent,r=n.userInfo,t.lockEndTime=r.lockEndTime,t.lockNumber=Object(i["add"])(4,r.currentUnlocked,r.currentStaked),e.next=10,t.poolContract.methods.overview().call();case 10:return a=e.sent,o=Object(i["comparedTo"])(a.minDepositAmount,a.poolInfo.minStakeAmount)>=0?a.minDepositAmount:a.poolInfo.minStakeAmount,t.minDepositAmount=Object(i["transformationNumber"])(o),t.vesting=Object(i["transformationNumber"])(Object(i["add"])(4,n.unsettledReward,r.rewardLocked,r.rewardSettled,r.rewardReleased)),t.withdrawable=Object(i["transformationNumber"])(Object(i["add"])(4,r.rewardReleased,n.unsettledReleased)),t.liquidity=Object(i["transformationNumber"])(a.poolInfo.currentStaked,4,t.pool.stakeDecimals?t.pool.stakeDecimals:18),e.next=18,t.getLockApr(a,t.pool,604800);case 18:return t.apr=e.sent,t.stakeTokenContract=new t.$web3Obj.web3.eth.Contract(t.$config.abi.token,a.poolInfo.stakeToken),e.next=22,t.updateBalance();case 22:t.getAllow();case 23:case"end":return e.stop()}}),e)})))()},getPentyDate:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.poolContract.methods.getPenaltyConfig().call();case 3:n=e.sent,t.penalty={},t.penalty.penaltyRate=100*Object(i["transformationNumber"])(n._penaltyRate,6,6),t.penalty.penaltyTime=formatDate2(1e3*n._penaltyEndTime),console.log(n),e.next=14;break;case 10:e.prev=10,e.t0=e["catch"](0),console.log(e.t0),console.log("no penalty");case 14:case"end":return e.stop()}}),e,null,[[0,10]])})))()},getAllow:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.stakeTokenContract.methods.allowance(t.$web3Obj.currentAddress,t.contractAddress).call();case 2:n=e.sent,Object(i["comparedTo"])(n,Object(i["transformationNumber18"])(t.balance,t.pool.stakeDecimals))>=0?t.poolConfirm="Confirm":t.poolConfirm="Approve";case 4:case"end":return e.stop()}}),e)})))()},getLockApr:function(t,e,n){var r=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){var o,s,c;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(1!==e.status&&0!=t.poolInfo.currentStaked){a.next=2;break}return a.abrupt("return",0);case 2:return o=Object(i["transformationNumber18"])(n*t.boostWeight/t.maxLockDuration/1e13+1,e.stakeDecimals),s=n/3.2*t.poolInfo.rewardPerBlock*o/t.poolInfo.totalShares,a.next=6,Object(l["getUSDTValue"])(e.path,r.$config.project.network[r.$route.query.network].router);case 6:return c=a.sent,c=Object(i["divs"])(2,100*s,c),a.abrupt("return",c);case 9:case"end":return a.stop()}}),a)})))()},withdrawInterest:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0!=t.withdrawable){e.next=3;break}return Object(s["a"])("withdraw amount must > 0"),e.abrupt("return");case 3:return e.prev=3,e.next=6,c["a"].contractSend(t.poolContract.methods.withdraw().send({from:t.$web3Obj.currentAddress,value:0}));case 6:t.getPoolUserData(),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](3),Object(s["a"])("withdraw fail");case 12:case"end":return e.stop()}}),e,null,[[3,9]])})))()},selectLockTime:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.currentLockTime=t,e.apr="",n.next=4,e.poolContract.methods.overview().call();case 4:return r=n.sent,n.next=7,e.getLockApr(r,e.pool,Object(i["mul"])(t,604800));case 7:e.apr=n.sent;case 8:case"end":return n.stop()}}),n)})))()},updateBalance:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.balance=0,e.next=3,t.stakeTokenContract.methods.balanceOf(t.$web3Obj.currentAddress).call();case 3:n=e.sent,t.balance=Object(i["transformationNumber"])(n,18,t.pool.stakeDecimals?t.pool.stakeDecimals:18);case 5:case"end":return e.stop()}}),e)})))()},approve:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c["a"].contractSend(t.stakeTokenContract.methods.approve(t.contractAddress,"0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff").send({from:t.$web3Obj.currentAddress,value:0}));case 3:t.getAllow(),e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),Object(s["a"])("stake token approve : fail");case 9:case"end":return e.stop()}}),e,null,[[0,6]])})))()},withdrawDeposit:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(t.lockNumber<=0)){e.next=3;break}return Object(s["a"])("withdraw amount must > 0"),e.abrupt("return");case 3:if(!((new Date).getTime()<=1e3*t.lockEndTime)){e.next=6;break}return Object(s["a"])("unlock time not reached"),e.abrupt("return");case 6:return e.prev=6,e.next=9,c["a"].contractSend(t.poolContract.methods.unstake().send({from:t.$web3Obj.currentAddress,value:0}));case 9:t.getPoolUserData(),e.next=16;break;case 12:e.prev=12,e.t0=e["catch"](6),console.error(e.t0),Object(s["a"])("withdraw fail");case 16:case"end":return e.stop()}}),e,null,[[6,12]])})))()},staking:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(null==t.confirmNum||""===t.confirmNum||t.confirmNum<t.minDepositAmount)){e.next=3;break}return Object(s["a"])("amount must  >= "+t.minDepositAmount),e.abrupt("return");case 3:if(!(Object(i["comparedTo"])(t.confirmNum,t.balance)>0)){e.next=6;break}return Object(s["a"])("no enough balance"),e.abrupt("return");case 6:return e.prev=6,n=Object(i["transformationNumber18"])(t.confirmNum,t.pool.stakeDecimals),r=Object(i["mul"])(t.currentLockTime,604800),e.next=11,c["a"].contractSend(t.poolContract.methods.stake(n,r).send({from:t.$web3Obj.currentAddress,value:0}));case 11:t.getPoolUserData(),e.next=18;break;case 14:e.prev=14,e.t0=e["catch"](6),console.error(e.t0),Object(s["a"])("staking fail");case 18:case"end":return e.stop()}}),e,null,[[6,14]])})))()},max:function(){0!=this.balance&&(this.confirmNum=this.balance)}}},m=p,d=(n("f657"),n("2877")),f=Object(d["a"])(m,r,a,!1,null,"7b076f2b",null);e["default"]=f.exports},f657:function(t,e,n){"use strict";n("1547")}}]);